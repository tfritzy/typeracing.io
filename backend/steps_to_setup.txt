# Minimal Docker Deployment Guide

## One-time Setup

1. Create a DigitalOcean Container Registry:
   ```bash
   doctl registry create your-registry
   ```

2. On your droplet, login to the registry:
   ```bash
   doctl registry login
   ```

3. Create these minimal files on your droplet in `/opt/typeracing.io/`:

   `docker-compose.yml`:
   ```yaml
   version: '3.8'
   
   services:
     typeracer:
       image: registry.digitalocean.com/your-registry/typeracer:latest
       restart: unless-stopped
       ports:
         - "8080:8080"
       env_file:
         - .env.production
       networks:
         - typeracer-network
   
     nginx:
       image: nginx:alpine
       restart: unless-stopped
       ports:
         - "80:80"
         - "443:443"
       volumes:
         - ./nginx.conf:/etc/nginx/conf.d/default.conf:ro
         - certbot-etc:/etc/letsencrypt
         - certbot-var:/var/lib/letsencrypt
       depends_on:
         - typeracer
       networks:
         - typeracer-network
   
   volumes:
     certbot-etc:
     certbot-var:
   
   networks:
     typeracer-network:
       driver: bridge
   ```

   `.env.production`:
   ```
   HOST_COLOR=your_color
   API_ADDRESS=https://typeracing-io-api.azurewebsites.net/
   API_KEY=your_api_key
   ```

   `nginx.conf` (same as before)

## Deployment Process

1. Push a new version (happens automatically via GitHub Actions)

2. On your droplet, pull and restart:
   ```bash
   cd /opt/typeracing.io
   docker compose pull
   docker compose up -d
   ```